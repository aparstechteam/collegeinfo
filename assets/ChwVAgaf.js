import{_ as W,b as H}from"./Bzp0Ull7.js";import{m as T,h as A,S as Q,_ as X,i as K,o as f,c as C,A as S,O as N,z,T as U,M as G,N as J,Q as I,j as Y,k as E,v as O,U as Z,r as j,R as x,q as ee,I as te,n as oe,b as y,J as h,a as l,t as L,w as F,L as q,V as ae,d as se,P as ne}from"./B5dAIK0X.js";import{_ as le}from"./BbIBqdoD.js";import{_ as ie}from"./lHQs2JrS.js";const ue={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},k=T(A.ui.strategy,A.ui.pagination,ue),re=T(A.ui.strategy,A.ui.button,Q),de=K({components:{UButton:I},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},disabled:{type:Boolean,default:!1},size:{type:String,default:()=>k.default.size,validator(e){return Object.keys(re.size).includes(e)}},to:{type:Function,default:null},activeButton:{type:Object,default:()=>k.default.activeButton},inactiveButton:{type:Object,default:()=>k.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>k.default.firstButton},lastButton:{type:Object,default:()=>k.default.lastButton},prevButton:{type:Object,default:()=>k.default.prevButton},nextButton:{type:Object,default:()=>k.default.nextButton},divider:{type:String,default:"â€¦"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:$}){const{ui:g,attrs:p}=Y("pagination",E(e,"ui"),k,E(e,"class")),n=O({get(){return e.modelValue},set(a){$("update:modelValue",a)}}),m=O(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(a,d)=>d+1)),i=O(()=>{const a=m.value.length,d=n.value,w=Math.max(e.max,5),c=Math.floor((Math.min(w,a)-5)/2),v=d-c,s=d+c,R=v-1>1,D=s+1<a,t=[];if(a<=w){for(let b=1;b<=a;b++)t.push(b);return t}if(t.push(1),R&&t.push(e.divider),!D){const b=d+c+2-a;for(let _=d-c-b;_<=d-c-1;_++)t.push(_)}for(let b=Math.max(2,v);b<=Math.min(a,s);b++)t.push(b);if(!R){const b=1-(d-c-2);for(let _=d+c+1;_<=d+c+b;_++)t.push(_)}return D&&t.push(e.divider),s<a&&t.push(a),t.length>=3&&t[1]===e.divider&&t[2]===3&&(t[1]=2),t.length>=3&&t[t.length-2]===e.divider&&t[t.length-1]===t.length&&(t[t.length-2]=t.length-1),t}),o=O(()=>n.value>1),B=O(()=>n.value<m.value.length);function V(){o.value&&(n.value=1)}function M(){B.value&&(n.value=m.value.length)}function u(a){typeof a!="string"&&(n.value=a)}function r(){o.value&&n.value--}function P(){B.value&&n.value++}return{ui:g,attrs:p,currentPage:n,pages:m,displayedPages:i,canGoLastOrNext:B,canGoFirstOrPrev:o,onClickPrev:r,onClickNext:P,onClickPage:u,onClickFirst:V,onClickLast:M}}});function ce(e,$,g,p,n,m){const i=I;return f(),C("div",z({class:e.ui.wrapper},e.attrs),[S(e.$slots,"first",{onClick:e.onClickFirst},()=>[e.firstButton&&e.showFirst?(f(),N(i,z({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","disabled","class","onClick"])):U("",!0)]),S(e.$slots,"prev",{onClick:e.onClickPrev},()=>[e.prevButton?(f(),N(i,z({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","disabled","class","onClick"])):U("",!0)]),(f(!0),C(G,null,J(e.displayedPages,(o,B)=>{var V;return f(),N(i,z({key:`${o}-${B}`,to:typeof o=="number"?(V=e.to)==null?void 0:V.call(e,o):null,size:e.size,disabled:e.disabled,label:`${o}`,ref_for:!0},o===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof o=="string","z-[1]":o===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(o)}),null,16,["to","size","disabled","label","class","onClick"])}),128)),S(e.$slots,"next",{onClick:e.onClickNext},()=>[e.nextButton?(f(),N(i,z({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","disabled","class","onClick"])):U("",!0)]),S(e.$slots,"last",{onClick:e.onClickLast},()=>[e.lastButton&&e.showLast?(f(),N(i,z({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","disabled","class","onClick"])):U("",!0)])],16)}const pe=X(de,[["render",ce]]),fe={key:0,class:"max-w-6xl mx-auto py-10"},me={class:"text-2xl font-semibold my-4"},he={class:"flex justify-between mb-3"},ve={class:"flex gap-4 items-end"},be={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg"},ye={class:"w-full text-sm text-left text-gray-500"},ge=l("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[l("tr",null,[l("th",{scope:"col",class:"px-6 py-3"}," Name "),l("th",{scope:"col",class:"px-6 py-3"}," Phone "),l("th",{scope:"col",class:"px-6 py-3"}," College "),l("th",{scope:"col",class:"px-6 py-3"}," Batch ")])],-1),Be={scope:"row",class:"px-6 py-4 font-medium whitespace-nowrap"},ke={class:"px-6 py-4"},Ce={class:"px-6 py-4"},we={class:"px-6 py-4"},_e={class:"mt-5"},Ve={key:1},je={__name:"reviews",setup(e){const{$axios:$}=ne(),g=Z(),p=j(null),n=j(g.query.page?parseInt(g.query.page):1),m=j(""),i=j(g.query.batch?g.query.batch:""),o=j(g.query.per_page?parseInt(g.query.per_page):50),B=async()=>{try{const u={};m.value&&(u.search=m.value),o.value&&(u.limit=o.value),n.value&&(u.page=n.value),i.value&&i.value!=="All Batch"&&(u.batch=i.value);const{data:r}=await $.get("/reviews",{params:u});p.value=r}catch(u){console.log(u.message)}},V=x();ee([i,o,n],()=>{B(),V.push({query:{batch:i.value,per_page:o.value,page:n.value}}),window.scrollTo(0,0)}),te(m,()=>{B()},1e3),oe(()=>{B()});const M=async()=>{try{const u=p.value.data.map(v=>({name:v.name,phone:v.phone,college:v.college.name,batch:v.batch})),r=Object.keys(u[0]),P=u.map(v=>r.map(s=>JSON.stringify(v[s])).join(","));P.unshift(r.join(","));const a=P.join(`\r
`),d=new Blob([a],{type:"text/csv"}),w=window.URL.createObjectURL(d),c=document.createElement("a");c.href=w,c.download="submissions.csv",c.click()}catch(u){console.log(u.message)}};return(u,r)=>{const P=H,a=W,d=I,w=le,c=pe,v=ae("Loader");return f(),C(G,null,[y(ie),h(p)?(f(),C("div",fe,[l("h1",me," Reviews - Total "+L(h(p).total)+" Reviews ",1),l("div",he,[y(a,{label:"Search"},{default:F(()=>[y(P,{modelValue:h(m),"onUpdate:modelValue":r[0]||(r[0]=s=>q(m)?m.value=s:null),placeholder:"Search"},null,8,["modelValue"])]),_:1}),l("div",ve,[l("div",null,[y(d,{onClick:M},{default:F(()=>[se(" Export to CSV ")]),_:1})]),y(a,{label:"Per Page"},{default:F(()=>[y(w,{options:[10,50,100,500,h(p).total],modelValue:h(o),"onUpdate:modelValue":r[1]||(r[1]=s=>q(o)?o.value=s:null),placeholder:"Per page"},null,8,["options","modelValue"])]),_:1}),y(a,{label:"Batch"},{default:F(()=>[y(w,{options:["All Batch","2025","2024","2023","2022","2021","2020"],modelValue:h(i),"onUpdate:modelValue":r[2]||(r[2]=s=>q(i)?i.value=s:null),placeholder:"HSC Batch"},null,8,["modelValue"])]),_:1})])]),h(p)&&h(p).data?(f(),C("div",be,[l("table",ye,[ge,l("tbody",null,[(f(!0),C(G,null,J(h(p).data,(s,R)=>(f(),C("tr",{key:s._id,class:"border-b"},[l("th",Be,L(s.name),1),l("td",ke,L(s.phone),1),l("td",Ce,L(s.college.name),1),l("td",we,L(s.hsc_batch),1)]))),128))])])])):U("",!0),l("div",_e,[y(c,{class:"mx-auto",modelValue:h(n),"onUpdate:modelValue":r[3]||(r[3]=s=>q(n)?n.value=s:null),"page-count":h(p).limit,total:h(p).total},null,8,["modelValue","page-count","total"])])])):(f(),C("div",Ve,[y(v)]))],64)}}};export{je as default};
